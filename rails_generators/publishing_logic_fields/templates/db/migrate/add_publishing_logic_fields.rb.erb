<% table_name = class_name.underscore.camelize.tableize %>

class <%= migration_name %> < ActiveRecord::Migration
  def self.up
    add_column :<%= table_name %>, :publishing_enabled, :boolean
    add_column :<%= table_name %>, :published_at, :datetime
    add_column :<%= table_name %>, :published_until, :datetime

    add_index :<%= table_name %>, [:published_at, :publishing_enabled, :published_until], :name => :index_<%= table_name %>_on_publishing_logic_fields
  end

  def self.down
    remove_column :<%= table_name %>, :publishing_enabled
    remove_column :<%= table_name %>, :published_at
    remove_column :<%= table_name %>, :published_until

    remove_index :<%= table_name %>, :name => :index_<%= table_name %>_on_publishing_logic_fields
  end
end
