<% table_name = class_name.underscore.camelize.tableize %>

class <%= migration_name %> < ActiveRecord::Migration
  def self.up
    change_table :<%= table_name %> do |t|
      t.boolean :publishing_enabled
      t.datetime :published_at<% unless no_published_until %>, :published_until<% end %>
      t.index [:published_at, :publishing_enabled<% unless no_published_until %>, :published_until<% end %>], :name => 'index_<%= table_name %>_on_publishing_logic_fields'
    end
  end

  def self.down
    change_table :<%= table_name %> do |t|
      t.remove :publishing_enabled, :published_at<% unless no_published_until %>, :published_until<% end %>
      t.remove_index :name => 'index_<%= table_name %>_on_publishing_logic_fields'
    end
  end
end
